Хорошая статья, которая поможет освежить знания и перенести логику класса LocalIterator.
Создавать класс LocalIterator внутри анонимного класса при этом не надо.
Блоки инициализации в Java - Часть 1.
https://vertex-academy.com/tutorials/ru/bloki-inicializacii-v-java-chast-1/